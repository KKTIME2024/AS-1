# 预算追踪系统综合测试方案

本测试方案旨在确保预算追踪系统满足专业响应式布局、表单数据验证和WCAG可访问性标准的要求。

## 1. 响应式设计测试

### 1.1 设备兼容性测试

| 测试项 | 测试内容 | 预期结果 |
|-------|---------|----------|
| 桌面端布局 | 屏幕宽度≥1024px时，所有页面显示完整布局 | 导航栏水平显示，内容区域多列布局，图表正常显示 |
| 平板端布局 | 屏幕宽度768-1023px时的布局适配 | 导航栏保持水平，内容区域调整为合适列数 |
| 移动端布局 | 屏幕宽度<768px时的布局适配 | 导航菜单收起为汉堡菜单，内容区域单列显示，元素大小适合触摸操作 |

### 1.2 导航响应式测试

| 测试项 | 测试内容 | 预期结果 |
|-------|---------|----------|
| 汉堡菜单功能 | 在移动端点击汉堡菜单按钮 | 导航菜单从侧边或顶部滑出，显示所有导航项 |
| 菜单关闭功能 | 点击关闭按钮或页面其他区域 | 导航菜单平滑收起 |
| 断点检测 | 缓慢调整浏览器窗口大小 | 布局在768px断点处平滑过渡，无布局错位 |

### 1.3 图表响应式测试

| 测试项 | 测试内容 | 预期结果 |
|-------|---------|----------|
| 图表大小调整 | 调整浏览器窗口大小 | 所有图表（条形图、饼图）能够自适应容器宽度变化 |
| 移动端图表显示 | 在小屏幕设备上查看图表 | 图表可滚动或调整大小以适应小屏幕，不出现水平溢出 |

## 2. 表单验证测试

### 2.1 客户端验证测试

#### 收入表单测试

| 测试项 | 测试内容 | 预期结果 |
|-------|---------|----------|
| 金额非空验证 | 尝试提交空金额字段 | 显示错误提示，表单不提交，输入框获得焦点 |
| 金额格式验证 | 输入非数字或无效格式 | 显示错误提示，指明无效金额格式 |
| 金额范围验证 | 输入负数或超过限制的金额 | 显示错误提示，指明金额必须大于0且小于限制值 |
| 小数位数验证 | 输入超过2位小数的金额 | 显示错误提示，指明金额最多保留2位小数 |
| 类别验证 | 不选择类别提交表单 | 显示错误提示，要求选择有效的收入类别 |
| 字符长度验证 | 输入超长的名称或描述 | 显示错误提示，自动截断超长内容 |
| 键盘导航 | 使用Tab键和Enter键导航 | 焦点按照逻辑顺序移动，Enter键可在字段间跳转 |
| 实时验证反馈 | 输入过程中实时显示错误 | 随着输入内容变化，错误提示应及时更新或消失 |

#### 支出表单测试

| 测试项 | 测试内容 | 预期结果 |
|-------|---------|----------|
| 金额非空验证 | 尝试提交空金额字段 | 显示错误提示，表单不提交，输入框获得焦点 |
| 金额格式验证 | 输入非数字或无效格式 | 显示错误提示，指明无效金额格式 |
| 金额范围验证 | 输入负数或超过限制的金额 | 显示错误提示，指明金额必须大于0且小于限制值 |
| 小数位数验证 | 输入超过2位小数的金额 | 显示错误提示，指明金额最多保留2位小数 |
| 类别验证 | 不选择类别提交表单 | 显示错误提示，要求选择有效的支出类别 |
| 字符长度验证 | 输入超长的名称或描述 | 显示错误提示，自动截断超长内容 |

### 2.2 服务器端验证测试

| 测试项 | 测试内容 | 预期结果 |
|-------|---------|----------|
| 绕过客户端验证 | 使用API工具直接发送无效数据 | 服务器返回适当的错误状态码和错误消息 |
| 无效JSON格式 | 发送非JSON格式数据 | 服务器返回400错误，提示"无效的JSON数据" |
| 缺少必要字段 | 不发送amount字段 | 服务器返回400错误，提示缺少必要字段 |
| 金额范围测试 | 发送负数或超大金额 | 服务器返回400错误，提示金额超出有效范围 |
| 无效类别测试 | 发送不存在的类别值 | 服务器返回400错误，提示"请选择有效的类别" |
| 字符长度限制 | 发送超长的名称或描述 | 服务器返回400错误，提示字符长度超出限制 |
| 数据库异常处理 | 模拟数据库错误 | 服务器返回500错误，提示服务器错误，事务回滚 |

## 3. 可访问性测试（WCAG标准）

### 3.1 键盘可访问性

| 测试项 | 测试内容 | 预期结果 |
|-------|---------|----------|
| 跳过导航链接 | 页面加载后按Tab键 | 首先聚焦到"跳过导航"链接 |
| 键盘导航完整性 | 仅使用键盘导航整个页面 | 所有交互元素可通过Tab键访问，焦点顺序逻辑合理 |
| 焦点可见性 | 移动焦点时观察焦点指示器 | 所有元素获得焦点时显示清晰的焦点样式（3px蓝色边框） |
| 焦点陷阱检查 | 使用模态框或弹出菜单 | 不应出现键盘焦点被陷阱的情况 |

### 3.2 屏幕阅读器兼容性

| 测试项 | 测试内容 | 预期结果 |
|-------|---------|----------|
| ARIA属性正确使用 | 检查表单元素ARIA属性 | 错误状态应设置aria-invalid="true"，并关联aria-describedby |
| 活动状态指示 | 检查导航项活动状态 | 当前活动页面链接应包含aria-current="page" |
| 语义化HTML | 检查页面HTML结构 | 使用正确的语义化标签（header, nav, main, footer等） |
| 表单标签关联 | 检查表单标签和输入框 | 所有输入元素都有关联的label标签 |

### 3.3 视觉设计可访问性

| 测试项 | 测试内容 | 预期结果 |
|-------|---------|----------|
| 颜色对比度 | 使用对比度检查工具验证文本颜色 | 普通文本对比度≥4.5:1，大文本对比度≥3:1（WCAG AA标准） |
| 非颜色信息载体 | 检查是否仅通过颜色传达信息 | 重要信息应使用形状、图标或文本等多种方式传达 |
| 动画控制 | 检查动画效果 | 支持prefers-reduced-motion设置，减少动画效果 |
| 字体大小调整 | 增大浏览器字体大小 | 布局应适应文本缩放，不破坏页面结构 |

## 4. 测试工具推荐

### 4.1 响应式设计测试工具

- **Chrome DevTools Device Mode** - 模拟不同设备尺寸和分辨率
- **BrowserStack** - 跨浏览器和跨设备测试
- **Responsive Design Checker** - 快速检查多个断点的布局

### 4.2 可访问性测试工具

- **WAVE Web Accessibility Evaluation Tool** - 可视化可访问性问题
- **Axe DevTools** - 详细的可访问性问题报告
- **Lighthouse** - 综合性能和可访问性评分
- **NVDA或VoiceOver** - 屏幕阅读器测试

### 4.3 表单验证测试工具

- **Postman** - 测试服务器端API验证
- **Jest** - 编写自动化客户端验证测试
- **Browser DevTools** - 检查表单提交和错误处理

## 5. 测试执行流程

1. **准备测试环境**
   - 设置不同尺寸的测试设备或模拟器
   - 配置屏幕阅读器和可访问性测试工具
   - 准备测试数据（有效和无效的表单数据）

2. **执行功能测试**
   - 按照上述测试用例执行各项功能测试
   - 记录测试结果和发现的问题

3. **执行自动化测试**
   - 使用Jest编写并运行客户端验证测试
   - 使用Postman执行API自动化测试

4. **可访问性审计**
   - 使用WAVE和Axe工具进行全面可访问性审计
   - 使用屏幕阅读器进行实际用户体验测试

5. **问题修复和验证**
   - 修复测试中发现的问题
   - 重新执行相关测试用例验证修复效果

## 6. 验收标准

- 所有页面在桌面、平板和移动设备上正确显示
- 所有表单验证在客户端和服务器端均正常工作
- 网站满足WCAG 2.1 AA级标准
- 没有键盘可访问性障碍
- 所有交互元素有足够的点击区域（至少44×44像素）
- 文本颜色对比度符合WCAG要求

通过执行此综合测试方案，可以确保预算追踪系统在响应式设计、表单验证和可访问性方面达到专业标准。